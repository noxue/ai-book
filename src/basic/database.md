# 数据库基础

当我们要长期的存储一些信息，并方便后续查询和展示，我们就需要使用数据库。比如：用户登录信息，商品信息，订单信息，等等。


### 关系型数据库

关系型数据库就是二维表格，每个表格都有行和列。

一个数据库看起来就像 Excel 文档一样，一个文档可以有多个表，每个表有固定的字段。

之所以叫**关系型数据库**，就是多个表之间可以建立关系。通过**外键约束**，可以保证数据的完整性和一致性。


#### 简单理解**外键约束**

比如有 **用户表** 和 **订单表**

#### 用户表 (Users)

| 用户编号 (user_id) | 用户名 (username) | 邮箱 (email)         | 电话 (phone) |
| ------------------ | ----------------- | -------------------- | ------------ |
| 1                  | 张三              | zhangsan@example.com | 1234567890   |
| 2                  | 李四              | lisi@example.com     | 0987654321   |
| 3                  | 王五              | wangwu@example.com   | 1122334455   |

---

#### 订单表 (Orders)

| 订单编号 (order_id) | 用户编号 (user_id) | 商品 (product) | 订单金额 (amount) |
| ------------------- | ------------------ | -------------- | ----------------- |
| 101                 | 1                  | 手机           | 2000元            |
| 102                 | 2                  | 电脑           | 5000元            |
| 103                 | 1                  | 耳机           | 300元             |


上面说过，数据库中的表，可以当作excel表格看待。

简单分析上面两张表可以看出：
* 张三 有 2 个订单，订单编号分别是 101和102，因为这两个订单的 用户编号 对应张三的编号
* 李四 有 1 个订单
* 王五 没有订单

现在我们如果在订单表中添加一条数据

| 订单编号 (order_id) | 用户编号 (user_id) | 商品 (product) | 订单金额 (amount) |
| ------------------- | ------------------ | -------------- | ----------------- |
| 101                 | 1                  | 手机           | 2000元            |
| 102                 | 2                  | 电脑           | 5000元            |
| 103                 | 1                  | 耳机           | 300元             |
| 104                 | 10                 | 吹风机         | 30元              |

那么问题来了，吹风机这个订单是谁的？我们会发现用户表中没有编号为10的用户，那么这个订单就不知道是谁的。

数据是不是就乱了。

怎么解决？

就是在添加数据的时候，限制订单表的的**用户编号** 必须是在用户表中存在的用户，否则不让添加。

正好这就是 **外键约束** 的主要作用。从而保证了数据的一致性和完整性，不会出现无主的订单。

> 总结：
>
> 关系型数据库的特点是
>
>   1. 数据表结构需要预先设计好，再按照格式插入数据，就像 excel 先做了个模板，按照格式填数据一样
>
>   2. 数据表之间可以建立关系，通过**外键约束**，可以保证数据的完整性和一致性

#### 常用的关系型数据库

* MySQL：开源的关系型数据库，广泛应用于Web应用，特别是在LAMP（Linux, Apache, MySQL, PHP/Perl/Python）堆栈中。
* PostgreSQL：开源的、功能强大的关系型数据库，支持ACID事务和复杂查询，适用于需要高可扩展性和一致性的应用。
* SQLite：一个轻量级的嵌入式数据库，适用于小型应用和嵌入式系统。
* Oracle Database：由Oracle公司开发的关系型数据库，广泛应用于大型企业级应用，具有高度的可扩展性和可靠性。
* Microsoft SQL Server：由微软开发的数据库，广泛应用于企业级应用，特别是在与微软技术堆栈集成时。
* MariaDB：MySQL的一个分支，通常作为MySQL的替代品使用，强调更高的性能和开源。
* Amazon Aurora：由亚马逊AWS提供的关系型数据库服务，兼容MySQL和PostgreSQL，设计上强调高可用性和自动扩展。

> 
> 目前 MySql 用得最多，一般都会选择 MariaDB。
> 
> 不过 PostgreSQL 越来越流行，新项目推荐


### 非关系型数据库

做个了解即可

* redis：一般用作缓存数据库
* mongodb：文档型数据库，一般用来存储日志



## 关系型数据库的基础语法

所有关系型数据库都可以通过 sql 语句来进行操作，实现对数据的 增删改查

> 但是实际开发过程中，基本都会使用 ORM库来进行数据库的操作，很少会手写 sql 语句


## 用下面的话问AI：
```text
列出sql中 创建表 增删改查 常用的语句，直接给出简单的 语句就行，以一个用户表为例子，有字段 用户编号，账号和密码。每一次操作之后，列出操作后的表结构和数据的情况，用表格展示出来
```

## 会给出类似下面的回答（关于具体的语句的细节还可以继续追问）：

好的，下面是一些常用的 SQL 语句，以“用户表”为例：

### 1. 创建表

```sql
CREATE TABLE 用户表 (
    用户编号 INT PRIMARY KEY,
    账号 VARCHAR(50),
    密码 VARCHAR(50)
);
```

**表结构：**

| 字段名称  | 数据类型     | 说明       |
|-----------|--------------|------------|
| 用户编号  | INT          | 主键，用户的唯一编号 |
| 账号      | VARCHAR(50)   | 用户账号     |
| 密码      | VARCHAR(50)   | 用户密码     |

### 2. 插入数据

```sql
INSERT INTO 用户表 (用户编号, 账号, 密码) VALUES (1, 'user1', 'password1');
INSERT INTO 用户表 (用户编号, 账号, 密码) VALUES (2, 'user2', 'password2');
```

**数据：**

| 用户编号 | 账号   | 密码       |
|----------|--------|------------|
| 1        | user1  | password1  |
| 2        | user2  | password2  |

### 3. 查询数据

```sql
SELECT * FROM 用户表;
```

**数据：**

| 用户编号 | 账号   | 密码       |
|----------|--------|------------|
| 1        | user1  | password1  |
| 2        | user2  | password2  |

### 4. 更新数据

```sql
UPDATE 用户表 SET 密码 = 'newpassword' WHERE 用户编号 = 1;
```

**数据：**

| 用户编号 | 账号   | 密码       |
|----------|--------|------------|
| 1        | user1  | newpassword |
| 2        | user2  | password2  |

### 5. 删除数据

```sql
DELETE FROM 用户表 WHERE 用户编号 = 2;
```

**数据：**

| 用户编号 | 账号   | 密码       |
|----------|--------|------------|
| 1        | user1  | newpassword |

### 6. 删除表

```sql
DROP TABLE 用户表;
```

此时表已被删除，无法查看数据。

这样列出了 SQL 中创建表、增、删、改、查的基本操作，并展示了每一步后的表结构和数据变化情况。如果有其他问题或想进一步深入了解，欢迎随时提问！